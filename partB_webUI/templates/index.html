{% extends 'base.html' %}

{% block content %}

    <br>
    <form class = "container" method="POST">
        <label for="content"></label> 
        <h3>Enter Query Below</h3>
        <textarea name="content"
                  placeholder="Query content"
                  rows="10"
                  cols="80"
                  >{{ request.form['content'] }}</textarea>
        <br>
        {# <button type="submit">Submit</button> #}
        <input type="submit" value="Submit!">
    </form>

   
    <div>
        <h3> this div is for testing querty delete after: {{ userQuery }}</h3>
    </div>
{% endblock %}




{% block table %}
<style>
    .expandChildTable:before {
        content: "+";
        display: block;
        cursor: pointer;
    }
    .expandChildTable.selected:before {
        content: "-";
    }
    .childTableRow {
        display: none;
        border-radius: 25px;
        border: 2px solid #D3D3D3;
        background-color: #D3D3D3;
    }
    .childTableRow table {
        border: 2px solid #555;
    }


</style>

<div class="container wrapper">

    <div >
    <p class="alert alert-success">Query Results Below!</p>
    <table class="table" id="myTable">
        <thead>
            <tr>
                <th></th>
                <th>Result</th>
                <th>Score</th>
            </tr>
        </thead>

    </table>
    </div>
  </div>
   
  <script src="//code.jquery.com/jquery.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script><!-- <script src="js/disqus-config.js"></script> -->
  
  <script>

  $(function() {
      $('.expandChildTable').on('click', function() {
          $(this).toggleClass('selected').closest('tr').next().toggle();
      })
  });

var myArray = [
    {
        "title": "What are these?",
        "score": 12,
        "id": "133w2zb",
        "url": "https://i.redd.it/q2rbj37r83xa1.jpg",
        "num_comments": 19,
        "body": "I bought a large assortment of arduino and raspberry pi components at a yard sale. These are the only things I don\u2019t recognize, no numbers on it to go off",
        "created": 1682871424.0
    },
    {
        "title": "Fastest water dispenser to save lives",
        "score": 647,
        "id": "1330ape",
        "url": "https://v.redd.it/9pggcxr6puwa1",
        "num_comments": 49,
        "body": "",
        "created": 1682785994.0
    }
]

buildTable(myArray)

function buildTable(data){
    var table = document.getElementById('myTable')

    for (var i = 0; i < data.length; i++){
        var newRow = 
        `<tr>
            <td><span class="expandChildTable"></span></td>
            <td>${data[i].title}</td>
            <td>${data[i].score}</td>
        </tr>
        <tr class="childTableRow">
            <td colspan="3">
              <p>${data[i].body}</p>
            </td>
        </tr>
        <tr>`;

        table.innerHTML += newRow;

    }
}

</script>

{% endblock %}